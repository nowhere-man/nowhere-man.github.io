---
layout: post
title: H.264与H.265的对比
slug: h264-h265-compare
categories: [视频开发]
tags: [H.265]
date: 2025-09-14 00:00:00 +0800
---



| 特性             | H.264                                                        | H.265                                                        | H.265 关键增强                                               |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **基本编码单元** | **MB**                                                       | **CTU**                                                      | **CTU 取代宏块**：**可从 64x64 到 16x16**，远大于 H.264 固定的 16x16 宏块 |
| **块划分**       | **固定划分**: <br>宏块 (16x16) 可以划分为更小的块，最小为 4x4。 | **四叉树递归划分**                                           | • **CU, PU, TU分离**: CTU 被划分为编码单元(CU)，CU再划分为预测单元(PU)和变换单元(TU)。<br>• **高度灵活**: CU (64x64~8x8) 可根据内容复杂度自适应划分，PU 和 TU 支持**不对称划分**。 |
| **PU**           | -                                                            | • **对称划分**: 2Nx2N, 2NxN, Nx2N, NxN <br>• **非对称运动划分 (AMP)**: 2NxnU, 2NxnD, nLx2N, nRx2N |                                                              |
| **TU**           | **4x4 和 8x8** 整数离散余弦变换                              | **4x4, 8x8, 16x16, 32x32** 整数离散余弦/正弦变换 (DCT/**DST**) | • **更大的变换尺寸**: 更好地集中平坦区域的能量。<br>• **引入 DST**: 对帧内预测的残差使用 DST |
| **帧内预测**     | **9 种** 预测模式<br/> (8个方向 + 1个DC平均值)               | **35 种** 预测模式<br/> (33个角度 + 1个DC + 1个平面Planar)   |                                                              |
| **帧间预测**     | 运动矢量预测采用**中值预测**。                               | • **高级运动矢量预测 (AMVP)**<br>• **合并模式 (Merge Mode)** | • **AMVP**: 从空域和时域多个候选中选择最优的运动矢量预测子，预测更准。<br>• **Merge Mode**: 直接复用邻近块的运动信息（运动矢量、参考帧等），只需传输一个索引，极大节省了码率。 |
| **环路滤波器**   | **DBF**                                                      | **DBF**(算法更高效)<br>**SAO**                               | **SAO滤波器**: 作为 DBF之后的新增步骤，通过给像素值添加偏移来减少振铃效应(ringing)等失真。 |
| **熵编码**       | • **CABAC** <br>• **CAVLC**                                  | **仅使用 CABAC** (经过优化)                                  | • **统一采用 CABAC**: 并且其核心引擎经过优化，上下文模型更精细，编码效率更高。 |
| **并行**         | **Slices**                                                   | • **Slices**<br>• **Tiles**<br>• **WPP**                     | **Tiles 和 WPP**: 专门为现代多核CPU/GPU设计。Tiles 将图像分割成独立的矩形区域，WPP 则允许 CTU 行之间并行处理，极大地提高了编解码的并行度 |