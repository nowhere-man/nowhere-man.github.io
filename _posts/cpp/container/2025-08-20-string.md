---
layout: post
title: string 核心总结
slug: stl-string
categories: [C++总结]
tags: [STL]
---
string并不是一个单独的容器，只是basic_string 模板类的一个特化，basic_string用于创建可以存储任何类型**字符**的字符串类：

```cpp
template<
    typename _CharT,                        // 字符的类型
    typename _Traits = char_traits<_CharT>, // 字符类型的行为
    typename _Alloc = allocator<_CharT>     // 内存分配器
> class basic_string;

typedef basic_string<char> string;
```

## string的构造函数

```cpp
string s1;                       // 空字符串，length为0
string s2("hello");              // 使用const char* 构造
string s3(s2);                   // 使用一个string拷贝构造
string s4(std::move(s3));        // 使用一个string移动构造
string s4(3, 'a');               // "aaa"
string s5(s4.begin(), s4.end()); // 使用迭代器构造
string s6(s4, 1, 2);             // 从s4的索引1开始，复制2个字符
string s7 {'o','k'};             // 列表初始化
string s8 = "hello";             // C风格构造
```

## string的成员函数

**访问**：

+ front()
+ back()
+ data()：返回一个`const char *`指针，c++17后可以返回`char *`。
+ at()：`at()`会检查边界，如果索引超出有效范围，`at()`会抛出out_of_range异常。
+ operator[]
+ **c_str()**：返回`const char *`的C风格字符串。

**修改**:

+ push_back()：push_back只能是`char`
+ pop_back()
+ **append()**：可以`append(const char* )`，也可以`append(string& )`
+ insert()：`insert(idx, val)`是在idx之前插入val。insert()会导致从第idx起后面的所有元素
+ clear()：清除所有元素，clear()完成后size()为0。
+ erase()：`erase(idx)`移除idx所在的元素； `erase(begin, end)`移除范围内的元素，不包括end。
+ **replace()**：`s.replace(idx, cnt, substr)`，将s从idx开始，长度为cnt的字符串用substr替换。
+ **copy()**：`s.copy(char* dst, cnt, idx)`，将s中从idx开始，长度为cnt的字符串拷贝到dst中。

**搜索**：

+ **find()**：`find(s, idx)`，从idx开始**从左往右**查找子串s，如果找到返回首次出现时首字符的索引，如果找不到，返回`string::npos`。
+ **rfind()**：r`find(s, idx)`，从idx开始**从右往左**查找子串s，如果找到返回首次出现时首字符的索引，如果找不到，返回`string::npos`。
+ find_first_of()：`find_first_of(s, idx)`，从idx开始查找子串s中**任何一个字符**首次出现的位置。
+ find_fist_not_of()：查找第一个不包含在参数中的字符。
+ find_last_of()：`find_last_of(s, idx)`，从idx开始查找子串s中**任何一个字符**最后一次出现的位置。
+ find_last_not_of()：查找最后一个不包含在参数中的字符

操作：

+ **compare()**：相同为0。
+ **substr()**：`substr(idx, len)`，从idx开始，获取len个字符，返回该字符串。

**容量**：

+ empty()
+ size()
+ **length()**：size和length等价。
+ max_size():容器的理论极限size，和系统或库实现相关。
+ resize()：增加或减小size(),可能会改变capacity。
+ reserve()：增加capacity, 不修改size，`reserve(new_cp)`只在new_cp大于原有capacity时才扩容。
+ capacity()
+ shrink_to_fit()：将capacity减小至size，但是不是强制的，能否达成依赖于实现。

**迭代器**：

+ begin() 和 end()
+ cbegin() 和 cend()
+ rbegin() 和 rend()：`end()`和`cend()`是末尾元素的下一个元素， `rend()`是末尾元素， `rbegin()`是首元素的前一个元素。

## string的非成员函数

+ to_string()：将`int`,`long`,`float`,`double`等数值转为字符串。
+ stoi()：string to int
+ stol()：string to long
+ stoll()：string to long long
+ stof()：string to float
+ stod()：string to double
