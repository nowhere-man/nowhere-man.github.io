---
layout: post
title: WSL中配置Ubuntu 24.04
slug: ubuntu-24.04-wsl-configuration
categories: [环境配置]
tags: [Ubuntu, 环境配置]
---

## WSL

前置条件
+ 开启BIOS虚拟化
+ 可选功能中开启Hyper-V和WSL
+ powershell管理员模式下执行`bcdedit /set hypervisorlaunchtype auto`

```bash
wsl --update
wsl --set-default-version 2
wsl --list --online
wsl --install -d Ubuntu-24.04
```

## 设置root密码
```bash
sudo passwd
```

## 设置sudo免输密码
```bash
# 使用root账户登录
chmod u+w /etc/sudoers
echo "username ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers
chmod u-w /etc/sudoers
```

## 替换apt源
```bash
# 备份
cd /etc/apt/sources.list.d
sudo cp ubuntu.sources ubuntu.sources.bak

# 修改ubuntu.sources
Types: deb
URIs: http://mirrors.aliyun.com/ubuntu/
Suites: noble noble-updates noble-security
Components: main restricted universe multiverse
Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg

# 更新
sudo apt update
sudo apt upgrade
```

## 安装apt包
```bash
sudo apt install build-essential nasm cmake gdb pkg-config python3 ruby vim cloc tree zip neofetch net-tools xdg-utils
sudo apt install llvm lldb clang-format clang-tidy
```

## 生成ssh-key
```bash
ssh-keygen -t rsa
```

## git配置
```bash
git config --global user.name "username"
git config --global user.email "email"

sudo apt-get install gnutls-bin
git config --global http.sslVerify false
git config --global http.postBuffer 1048576000

```

## [安装node.js](https://nodejs.org/en/download/current)

```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash
\. "$HOME/.nvm/nvm.sh"
nvm install 24
node -v # Should print "v24.5.0".
nvm current # Should print "v24.5.0".
npm -v # Should print "11.5.1".
```

## 安装npm包
```bash
npm install -g @openai/codex

npm install -g @anthropic-ai/claude-code

npm install -g @musistudio/claude-code-router

npm install -g @google/gemini-cli
```

## 安装gem包
```bash
gem install jekyll
```

## oh-my-zsh
```
## zsh
sudo apt install zsh
## 不要加sudo！！！
chsh -s /bin/zsh
## oh-my-zsh
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
## powerlevel10k
# edit ~/.zshrc
ZSH_THEME="powerlevel10k/powerlevel10k"

## plugins
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
plugins=(git vscode zsh-autosuggestions zsh-syntax-highlighting)

## ll
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
```

## 安装superfile
```bash
bash -c "$(curl -sLo- https://superfile.dev/install.sh)"
```

## 安装pwndbg
```bash
curl -qsL 'https://install.pwndbg.re' | sh -s -- -t pwndbg-gdb

curl -qsL 'https://install.pwndbg.re' | sh -s -- -t pwndbg-lldb
```
## 安装minicoda
参考这篇教程: [miniconda安装及使用](/2025/08/10/miniconda-installation-and-usage/)
